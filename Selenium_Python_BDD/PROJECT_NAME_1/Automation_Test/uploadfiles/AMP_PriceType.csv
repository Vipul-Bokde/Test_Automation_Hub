"Type","Source","Name","Reportable Name","Filter","Reportable","Dollar Logic","Unit Logic","Grouping","Period","Dollar Rounding","Unit Rounding","Take Minimum","Determines Ratio (AMP/NFAMP)","No Rollup","Use CPPD","Allow Overlap","Summary Display","Track Variance","Deliverable","Dollar Type"
"BUCKET","DS","whl_ds_sales","Wholesaler Direct Sales (70/30 calc)","TransType.Elig = 'y' AND AMPElig = 'y' AND COT.Wholesaler = 'y'","Y","","","","","","","","","","N","Y","N","N","","NET_AMOUNT"
"FORMULA","","whl_ds_sales_12m","Wholesaler Direct Sales - 12 months (70/30 calc)","","Y","0","whl_ds_sales + 0 + 0","NDC11","11","0","0","N","N","N","","","N","N","",""
"BUCKET","CBK","cont_cbk_sales","Contract chargebacks (70/30 calc)","BilltoState.AMPElig = 'y' AND ShiptoState.AMPElig = 'y'","Y","","","","","","","","","","N","N","N","N","","CBK_AMOUNT"
"FORMULA","","cont_cbk_sales_12m","Contract chargebacks - 12 months (70/30 calc)","","Y","0","cont_cbk_sales + 0 + 0","NDC11","11","0","0","N","N","N","","","N","N","",""
"FORMULA","","non_cont_sales_12m","Non Contract Sales - 12 months (70/30 calc)","","Y","0","whl_ds_sales_12m - cont_cbk_sales_12m","NDC9","11","0","0","N","N","N","","","N","N","",""
"BUCKET","DS","non_rcp_ds_sales","Non RCP Sales (70/30 calc)","TransType.Elig = 'y' AND AMPElig = 'y' AND COT.RCPElig = 'n' AND NetAmount != 0 AND TransType.Class = 'sale'","Y","","","","","","","","","","N","N","N","N","","NET_AMOUNT"
"FORMULA","","non_rcp_ds_sales_12m","Non RCP Sales - 12 months (70/30 calc)","","Y","0","non_rcp_ds_sales + 0 + 0","NDC11","11","0","0","N","N","N","","","N","N","",""
"BUCKET","CBK","non_rcp_cbk_sales","Non RCP chargebacks (70/30 calc)","BilltoState.AMPElig = 'y' AND ShiptoState.AMPElig = 'y' AND COT.RCPElig = 'n'","Y","","","","","","","","","","N","Y","N","N","","CBK_AMOUNT"
"FORMULA","","non_rcp_cbk_sales_12m","Non RCP chargebacks - 12 months (70/30 calc)","","Y","0","non_rcp_cbk_sales + 0 + 0","NDC11","11","0","0","N","N","N","","","N","N","",""
"FORMULA","","non_rcp_sales_12m","Non RCP sales - 12 months (70/30 calc)","","Y","0","non_rcp_ds_sales_12m + non_rcp_cbk_sales_12m + non_cont_sales_12m","NDC9","11","0","0","N","N","N","","","N","N","",""
"BUCKET","DS","ds_gross_sales_pre","Gross Sales (70/30 calc)","TransType.Class = 'sale' AND AMPElig = 'y'","Y","","","","","","","","","","N","Y","N","N","","NET_AMOUNT"
"FORMULA","","ds_gross_sales_12m","Gross Sales - 12 months (70/30 calc)","","Y","0","ds_gross_sales_pre + 0 + 0","NDC9","11","0","0","N","N","N","","","N","N","",""
"FORMULA","","rcp_sales_12m","RCP Sales (70/30 calc)","","Y","0","ds_gross_sales_12m - non_rcp_sales_12m - 0","NDC9","11","0","0","N","N","N","","","N","N","",""
"FORMULA","","rcp_ratio","RCP Sales - 12 months (70/30 calc)","","Y","0","rcp_sales_12m / ds_gross_sales_12m","NDC9","11","0","0","N","Y","N","","","N","N","",""
"BUCKET","DS","ds_gross_sales","Gross Sales","TransType.Class IN ('sale', 'free_good')","Y","","","","","","","","","","N","Y","N","N","","NET_AMOUNT"
"BUCKET","DS","ds_trans_inelig","Direct Sales Ineligible transactions","TransType.Elig = 'n'","Y","","","","","","","","","","N","N","N","N","","NET_AMOUNT"
"BUCKET","DS","ds_inelig_state","Direct Sales Ineligible State","TransType.Elig = 'y' AND AMPElig = 'n' AND TransType.Class = 'sale'","Y","","","","","","","","","","N","N","N","N","","NET_AMOUNT"
"BUCKET","DS","ds_inelig_cot","Direct Sales  Ineligible COT","TransType.Elig = 'y' AND AMPElig = 'y' AND (COTElig = 'n' OR (MType != '' AND MType != NULL)) AND TransType.Class = 'sale' AND NetAmount != 0","Y","","","","","","","","","","N","N","N","N","","NET_AMOUNT"
"BUCKET","DS","ds_free_goods","Free goods","TransType.Elig = 'y' AND (COTElig = 'y' OR COTElig = 'n') AND ((TransType.Class = 'sale' AND NetAmount = 0) OR (TransType.Class = 'free_good'))","Y","","","","","","","","","","N","N","N","N","","NET_AMOUNT"
"BUCKET","DS","ds_elig","Eligible Direct Sales","TransType.Elig = 'y' AND AMPElig = 'y' AND COTElig = 'y' AND (MType = '' OR MType = NULL) AND NetAmount != 0 AND TransType.Class = 'sale'","Y","","","","","","","","","","N","N","N","N","","NET_AMOUNT"
"BUCKET","DS","ds_elig_adj","Direct Sales Eligible Adjustments.","TransType.Elig = 'y' AND AMPElig = 'y' AND COTElig = 'y' AND (MType = '' OR MType = NULL) AND TransType.Class = 'adjust'","Y","","","","","","","","","","N","N","N","N","","NET_AMOUNT"
"BUCKET","DS","ds_elig_adj_sp","Eligible Direct Sales Adjustments Special Pricing","TransType.Elig = 'y' AND AMPElig = 'y' AND COTElig = 'y' AND (MType = '' OR MType = NULL) AND TransType.Class = 'special_pricing'","Y","","","","","","","","","","N","N","N","N","","NET_AMOUNT"
"BUCKET","DS","ds_inelig_adj","Direct Sales Ineligible Adjustments.","TransType.Elig = 'y' AND (AMPElig = 'n' OR COTElig = 'n' OR (MType != '' AND MType != NULL)) AND TransType.Class = 'adjust'","Y","","","","","","","","","","N","N","N","N","","NET_AMOUNT"
"FORMULA","","ds_inelig","Ineligible Direct Sales","","Y","ds_trans_inelig + ds_inelig_state + ds_inelig_cot","ds_trans_inelig + ds_inelig_state + ds_inelig_cot","NDC11","0","0","0","N","N","N","","","N","N","",""
"FORMULA","","ds_adj_elig","Eligible Adjusted Direct Sales","","Y","ds_elig + ds_elig_adj - ds_elig_adj_sp","ds_elig + ds_elig_adj","NDC11","0","0","0","N","N","N","","","N","N","",""
"FORMULA","","ds_inelig_12m","Ineligible Direct Sales - 12 months","","Y","ds_inelig + 0 + 0","ds_inelig + 0 + 0","NDC9","11","0","0","N","N","N","","","N","N","",""
"FORMULA","","ds_adj_elig_12m","Eligible Adjusted Direct Sales - 12 months","","Y","ds_adj_elig + 0 + 0","ds_adj_elig + 0 + 0","NDC9","11","0","0","N","N","N","","","N","N","",""
"BUCKET","CBK","cbk_whl_inelig","Ineligible Indirect Sales - non-domestic whl","BilltoState.AMPElig = 'n'","Y","","","","","","","","","","N","N","N","N","","WAC_AMOUNT"
"BUCKET","CBK","cbk_cont_inelig","Ineligible Indirect sales - contract","BilltoState.AMPElig = 'y' AND (Contract.Eligible = 'n' OR (MType != '' AND MType != NULL))","Y","","","","","","","","","","N","N","N","N","","WAC_AMOUNT"
"BUCKET","CBK","cbk_state_inelig","Ineligible Indirect sales - State","BilltoState.AMPElig = 'y' AND Contract.Eligible = 'y' AND (MType = '' OR MType = NULL) AND ShiptoState.AMPElig = 'n'","Y","","","","","","","","","","N","N","N","N","","WAC_AMOUNT"
"BUCKET","CBK","cbk_cot_inelig","Ineligible Indirect sales - COT","BilltoState.AMPElig = 'y' AND Contract.Eligible = 'y' AND (MType = '' OR MType = NULL) AND ShiptoState.AMPElig = 'y' AND COTElig = 'n'","Y","","","","","","","","","","N","N","N","N","","WAC_AMOUNT"
"BUCKET","CBK","cbk_elig","AMP Eligible chargebacks","BilltoState.AMPElig = 'y' AND Contract.Eligible = 'y' AND (MType = '' OR MType = NULL) AND ShiptoState.AMPElig = 'y' AND COTElig = 'y'","Y","","","","","","","","","","N","N","N","N","","CBK_AMOUNT"
"FORMULA","","cbk_elig_12m","AMP Eligible chargebacks - 12 months","","Y","cbk_elig + 0 + 0","0","NDC9","11","0","0","N","N","N","","","N","N","",""
"FORMULA","","cbk_inelig","Ineligible chargebacks","","Y","cbk_cont_inelig + cbk_state_inelig + cbk_cot_inelig","cbk_cont_inelig + cbk_state_inelig + cbk_cot_inelig","NDC11","0","0","0","N","N","N","","","N","N","",""
"FORMULA","","indir_inelg","Ineligible Indirect Sales","","Y","cbk_inelig + 0 + 0","cbk_inelig + 0 + 0","NDC11","0","0","0","N","N","N","","","N","N","",""
"FORMULA","","indir_inelg_12m","Ineligible Indirect Sales - 12 months","","Y","indir_inelg + 0 + 0","indir_inelg + 0 + 0","NDC9","11","0","0","N","N","N","","","N","N","",""
"FORMULA","","amp_elig","Eligible AMP Sales","","Y","ds_adj_elig - indir_inelg","ds_adj_elig - indir_inelg","NDC11","0","0","0","N","N","N","","","N","N","",""
"FORMULA","","amp_elig_12m","Eligible AMP Sales - 12 months","","Y","ds_adj_elig_12m - indir_inelg_12m - 0","ds_adj_elig_12m - indir_inelg_12m - 0","NDC9","11","0","0","N","N","N","","","N","N","",""
"FORMULA","","pc_elig_12m","Eligible Price Concessions - 12 months","","Y","cbk_elig_12m + 0 + 0","0","NDC9","11","0","0","N","N","N","","","N","N","",""
"FORMULA","","pc_elig_ratio","Price concession ratio","","Y","pc_elig_12m / amp_elig_12m","0","NDC9","11","0","0","N","N","Y","","","N","N","",""
"FORMULA","","pc_smooth_elig","Smoothed Eligible Price concessions","","Y","pc_elig_ratio * amp_elig","0","NDC11","0","0","0","N","N","Y","","","N","N","",""
"BUCKET","DS","cppd_actual","","TransType.Elig = 'y' AND AMPElig = 'y' AND (ShiptoCOT.COT = 'A3' OR ShiptoCOT.COT = 'a3') AND (MType = '' OR MType = NULL) AND Product.AmpType ILIKE '5I' AND TransType.Class = 'sale'","N","","","","","","","","","","Y","Y","N","N","","NET_AMOUNT"
"FORMULA","","actual_cppd","","","N","CASE WHEN rcp_ratio.units < 0.3 THEN cppd_actual ELSE 0 END","0","NDC11","0","0","0","N","N","Y","","","N","N","",""
"FORMULA","","nonwhl_ppd","Eligible Prompt Pay discount","","Y","actual_cppd","0","NDC11","0","0","0","N","N","N","","","N","N","",""
"FORMULA","","amp_net_elig","Eligible AMP Net Sales","","Y","amp_elig - pc_smooth_elig - nonwhl_ppd","amp_elig","NDC11","0","0","0","N","N","N","","","Y","N","",""
"FORMULA","","amp_ndc9","Eligible AMP Net Sales - NDC9","","Y","CASE WHEN amp_net_elig.units <= 0 OR amp_net_elig <= 0 THEN 0 ELSE amp_net_elig / amp_net_elig.units END","CASE WHEN amp_net_elig <= 0 THEN 0 ELSE amp_net_elig END","NDC9","0","0","0","N","N","N","","","N","N","",""
"FORMULA","","ramp","Monthly AMP","","Y","CASE WHEN amp_ndc9 = 0 THEN prior_month(ramp) ELSE amp_ndc9 END","amp_ndc9","NDC9","0","6","3","N","N","N","","","Y","Y","MAMP",""
"FORMULA","","mamp_calculated","Calculated Monthly AMP","","Y","amp_net_elig","amp_net_elig","NDC9","0","0","0","N","N","N","","","N","N","",""
"FORMULA","","qamp_totals","QAMP Totals","","Y","mamp_calculated + period_adjust(mamp_calculated, '-1') + period_adjust(mamp_calculated, '-2')","mamp_calculated + period_adjust(mamp_calculated, '-1') + period_adjust(mamp_calculated, '-2')","NDC9","0","0","0","N","N","N","","","N","N","",""
"FORMULA","","_max_wac_monthly","Monthly Max WAC","","Y","max_wac_monthly","0","NDC9","0","0","0","N","N","N","","","N","N","",""
"FORMULA","","qamp","Calculated Quarterly AMP","","Y","qamp_totals / qamp_totals.units","qamp_totals","NDC9","0","6","3","N","N","N","","","N","N","",""
"FORMULA","","rqamp","Quarterly AMP","","Y","CASE WHEN qamp <= 0 THEN prior_quarter(rqamp) ELSE qamp END","qamp","NDC9","0","6","3","N","N","N","","","Y","Y","QAMP",""
